(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{7667:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(9521),r=n(5893);function a(e){var t=e.style,n=e.children;return(0,r.jsx)(o,{style:t,children:n})}var o=i.ZP.div.withConfig({displayName:"pageContainer__Container",componentId:"sc-sctx8k-0"})(["margin:0 auto;width:calc(100vw - 32px);height:calc(100vh - 176px);background:#f7f7f9;padding:24px 16px;display:flex;flex-direction:column;gap:32px;min-width:604px;"])},7357:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var i=n(9521),r=n(5893);function a(e){var t=e.style,n=e.children,i=e.onClick,a=e.className;return(0,r.jsx)(o,{style:t,onClick:i,className:a,children:n})}var o=i.ZP.div.withConfig({displayName:"cardLayout__Layout",componentId:"sc-284fa9-0"})(["background:#fff;position:relative;box-shadow:0 2px 8px rgba(76,78,100,0.22);border-radius:8px;padding:16px;display:flex;flex-direction:column;gap:16px;"])},6536:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var i=n(29),r=n(7794),a=n.n(r),o=n(4851),s=n(7294),c=n(3148),l=n(6495),d=n(9521),u=n(381),h=n.n(u),p=n(5893);function f(e){var t=e.color;return(0,p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"41",fill:"none",viewBox:"0 0 50 41",children:(0,p.jsxs)("g",{fill:t,children:[(0,p.jsx)("path",{d:"M48.296 0h-3.28v25.956h-21.99V0H3.916A3.885 3.885 0 0 0 0 3.822v37.086h50V1.592A1.704 1.704 0 0 0 48.296 0ZM19.73 24.618H3.121V7.102h16.608v17.516Z"}),(0,p.jsx)("path",{d:"M17.85 8.933H5v4.937h12.85V8.933Zm-10.27 6.8H5v2.58h2.58v-2.58Zm5.143 0h-2.58v2.58h2.58v-2.58ZM7.58 20.175H5v2.58h2.58v-2.58Zm5.143 0h-2.58v2.58h2.58v-2.58ZM42.468 0H25.573v23.408h16.895V0ZM39.92 19.745a1.13 1.13 0 0 1-1.114 1.115h-9.554a1.115 1.115 0 0 1-1.115-1.115v-9.697a1.115 1.115 0 0 1 1.115-1.115h9.554a1.114 1.114 0 0 1 1.114 1.115v9.697Z"})]})})}var x=n(1786),m=n(6409);function g(e){var t=e.data,n=(0,s.useState)("red"),i=n[0],r=n[1];return(0,s.useEffect)(function(){console.log(t.execution),r(m.Z.ToColorStatus(t.execution))},[t]),(0,p.jsxs)(v,{children:[(0,p.jsx)(j.MidTitle,{children:t.mid}),(0,p.jsxs)(y,{children:[(0,p.jsxs)(w,{children:[(0,p.jsx)(j.MachineNumber,{color:i,children:t.machineNo}),(0,p.jsx)(f,{color:i})]}),(0,p.jsxs)(w,{children:[(0,p.jsxs)(y,{children:[(0,p.jsx)(j.Title,{children:"공 정 명"}),(0,p.jsx)(j.Desc,{children:t.program})]}),(0,p.jsxs)(y,{children:[(0,p.jsx)(j.Title,{children:"수 량"}),(0,p.jsx)(j.Desc,{children:"".concat(t.partCount,"/").concat(t.planCount)})]}),(0,p.jsxs)(y,{children:[(0,p.jsx)(j.Title,{children:"남은시간"}),(0,p.jsx)(j.Desc,{children:+t.doneTime>0?x.Z.msToHHMM(+t.doneTime):"-"})]})]})]})]})}var v=d.ZP.div.withConfig({displayName:"RealTimeMachineItem__Container",componentId:"sc-p20sja-0"})(["width:230px;height:140px;padding:12px 18px;border-radius:8px;background-color:#f4f4f4;display:flex;flex-direction:column;gap:24px;& img{margin-left:8px;}"]),y=d.ZP.div.withConfig({displayName:"RealTimeMachineItem__RowFlex",componentId:"sc-p20sja-1"})(["display:flex;gap:16px;"]),w=d.ZP.div.withConfig({displayName:"RealTimeMachineItem__ColFlex",componentId:"sc-p20sja-2"})(["display:flex;flex-direction:column;justify-content:space-around;gap:6px;"]),j={MidTitle:d.ZP.p.withConfig({displayName:"RealTimeMachineItem__MidTitle",componentId:"sc-p20sja-3"})(["width:100%;background:rgba(255,255,255,0.6);height:28px;line-height:2;text-align:center;font-weight:700;font-size:14px;border:8px;"]),MachineNumber:d.ZP.p.withConfig({displayName:"RealTimeMachineItem__MachineNumber",componentId:"sc-p20sja-4"})(["width:100%;text-align:center;color:",";margin-left:4px;"],function(e){return e.color}),Title:d.ZP.p.withConfig({displayName:"RealTimeMachineItem__Title",componentId:"sc-p20sja-5"})(["flex-shrink:0;display:inline-block;font-size:10px;width:36px;color:#666666;text-align:justify;text-align-last:justify;-moz-text-align-last:justify;word-break:keep-all;"]),Desc:d.ZP.p.withConfig({displayName:"RealTimeMachineItem__Desc",componentId:"sc-p20sja-6"})(["width:calc(100% - 40px);color:rgba(0,0,0,0.87);font-size:12px;font-weight:400;word-break:break-all;"])},C=n(7667),k=n(9417),b=n(9603);function _(e){var t=e.title;return(0,p.jsxs)(T,{children:[(0,p.jsx)(b.G,{icon:k.ik8,size:"lg"}),(0,p.jsx)("p",{children:t})]})}var T=d.ZP.div.withConfig({displayName:"isEmpty__Container",componentId:"sc-1uquj3w-0"})(["height:100%;display:flex;flex-direction:column;justify-content:center;gap:8px;& path{color:#ff4d49;}& p{font-size:12px;color:#ff4d49;line-height:2;margin-top:10px;}"]),Z=function(e,t){return(Z=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},P=function(){return(P=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function E(e){var t,n,i,r,a,o,c,l,d=e.className,u=e.counterClockwise,h=e.dashRatio,p=e.pathRadius,f=e.strokeWidth,x=e.style;return(0,s.createElement)("path",{className:d,style:Object.assign({},x,(n=(t={pathRadius:p,dashRatio:h,counterClockwise:u}).counterClockwise,i=t.dashRatio,a=(1-i)*(r=2*Math.PI*t.pathRadius),{strokeDasharray:r+"px "+r+"px",strokeDashoffset:(n?-a:a)+"px"})),d:(c=(o={pathRadius:p,counterClockwise:u}).pathRadius,"\n      M 50,50\n      m 0,-"+c+"\n      a "+c+","+c+" "+(l=o.counterClockwise?1:0)+" 1 1 0,"+2*c+"\n      a "+c+","+c+" "+l+" 1 1 0,-"+2*c+"\n    "),strokeWidth:f,fillOpacity:0})}var R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return!function(e,t){function n(){this.constructor=e}Z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.getBackgroundPadding=function(){return this.props.background?this.props.backgroundPadding:0},t.prototype.getPathRadius=function(){return 50-this.props.strokeWidth/2-this.getBackgroundPadding()},t.prototype.getPathRatio=function(){var e=this.props,t=e.value,n=e.minValue,i=e.maxValue;return(Math.min(Math.max(t,n),i)-n)/(i-n)},t.prototype.render=function(){var e=this.props,t=e.circleRatio,n=e.className,i=e.classes,r=e.counterClockwise,a=e.styles,o=e.strokeWidth,c=e.text,l=this.getPathRadius(),d=this.getPathRatio();return(0,s.createElement)("svg",{className:i.root+" "+n,style:a.root,viewBox:"0 0 100 100","data-test-id":"CircularProgressbar"},this.props.background?(0,s.createElement)("circle",{className:i.background,style:a.background,cx:50,cy:50,r:50}):null,(0,s.createElement)(E,{className:i.trail,counterClockwise:r,dashRatio:t,pathRadius:l,strokeWidth:o,style:a.trail}),(0,s.createElement)(E,{className:i.path,counterClockwise:r,dashRatio:d*t,pathRadius:l,strokeWidth:o,style:a.path}),c?(0,s.createElement)("text",{className:i.text,style:a.text,x:50,y:50},c):null)},t.defaultProps={background:!1,backgroundPadding:0,circleRatio:1,classes:{root:"CircularProgressbar",trail:"CircularProgressbar-trail",path:"CircularProgressbar-path",text:"CircularProgressbar-text",background:"CircularProgressbar-background"},counterClockwise:!1,className:"",maxValue:100,minValue:0,strokeWidth:8,styles:{root:{},trail:{},path:{},text:{},background:{}},text:""},t}(s.Component);function N(e){e.children;var t=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)0>t.indexOf(i[r])&&(n[i[r]]=e[i[r]]);return n}(e,["children"]);return(0,s.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren"},(0,s.createElement)("div",{style:{position:"relative",width:"100%",height:"100%"}},(0,s.createElement)(R,P({},t)),e.children?(0,s.createElement)("div",{"data-test-id":"CircularProgressbarWithChildren__children",style:{position:"absolute",width:"100%",height:"100%",marginTop:"-100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},e.children):null))}function I(e){return Object.keys(e).forEach(function(t){null==e[t]&&delete e[t]}),e}function M(e){var t=e.turns,n=e.style;return(0,p.jsx)("div",{style:{position:"absolute",height:"100%",transform:"rotate(".concat(t,"turn)")},children:(0,p.jsx)("div",{style:n})})}n(7743);var O=n(6486),D=n.n(O);function V(e){var t,n,i,r,a,o,s,c,l,d,u,h,f=e.maxValue,x=e.minValue,m=e.value,g=e.innerText;return(0,p.jsx)(S,{children:(0,p.jsx)(N,{value:m,text:g,minValue:x,maxValue:f,styles:(n=(t={strokeLinecap:"butt",textColor:"#3A79EC",pathColor:"#3A79EC",trailColor:"#d5d7da"}).rotation,i=t.strokeLinecap,r=t.textColor,a=t.textSize,o=t.pathColor,s=t.pathTransition,c=t.pathTransitionDuration,l=t.trailColor,d=t.backgroundColor,{root:{},path:I({stroke:o,strokeLinecap:i,transform:u=null==n?void 0:"rotate("+n+"turn)",transformOrigin:h=null==n?void 0:"center center",transition:s,transitionDuration:null==c?void 0:c+"s"}),trail:I({stroke:l,strokeLinecap:i,transform:u,transformOrigin:h}),text:I({fill:r,fontSize:a}),background:I({fill:d})}),strokeWidth:10,children:D().range(10).map(function(e){return(0,p.jsx)(M,{turns:.1*e,style:{background:"#fff",width:"2px",height:"".concat(10,"%")}},"range_".concat(e))})})})}var S=d.ZP.div.withConfig({displayName:"progressCircle__Container",componentId:"sc-jefd7r-0"})(["width:160px;"]);function A(e){var t,n,i=e.list,r=(0,s.useState)([]),a=r[0],o=r[1];return(0,s.useEffect)(function(){for(var e=[],t=0;t<i.length;t++)i[t].doneTime>0&&i[t].doneTime<=36e5&&e.push(i[t]);o(e.sort(function(e,t){return e.doneTime-t.doneTime}))},[i]),(0,p.jsx)(H,{children:a.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(V,{maxValue:36e5,minValue:0,value:36e5-(null===(t=a[0])||void 0===t?void 0:t.doneTime),innerText:x.Z.msToHHMM(null===(n=a[0])||void 0===n?void 0:n.doneTime)}),(0,p.jsxs)(W,{children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{className:"table_head_machine_no",children:"호기"}),(0,p.jsx)("th",{align:"left",children:"기계명"}),(0,p.jsx)("th",{children:"남은시간"})]})}),(0,p.jsx)("tbody",{children:a.map(function(e,t){return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:null==e?void 0:e.machineNo}),(0,p.jsx)("td",{align:"left",children:null==e?void 0:e.mid}),(0,p.jsx)("td",{children:x.Z.msToHHMM(null==e?void 0:e.doneTime)})]},"done_soon_machine_".concat(t))})})]})]}):(0,p.jsx)(_,{title:"현재 1시간 미만의 공정 임박 기계가 없습니다."})})}var H=d.ZP.div.withConfig({displayName:"DoneSoonList__Container",componentId:"sc-bhlh1p-0"})(["height:100%;width:100%;display:flex;flex-direction:column;gap:32px;align-items:center;"]),W=d.ZP.table.withConfig({displayName:"DoneSoonList__SoonList",componentId:"sc-bhlh1p-1"})(["border-collapse:collapse;width:100%;& *{font-size:12px;font-weight:500;}& thead{height:32px;border-bottom:1px solid #d5d7da;}& .table_head_machine_no{width:56px;}& tbody tr{height:32px;text-align:center;}& tbody tr td{font-size:14px;font-weight:700;}& tbody tr:first-child td{color:#3a79ec;font-size:14px;font-weight:700;}"]),L=n(7357);c.kL.register(c.uw,c.f$,c.ZL,c.Dx,c.u,c.De);var z=(0,o.f3)("machineViewModel")((0,o.Pi)(function(e){var t=e.machineViewModel,n=(0,s.useState)(""),r=n[0],o=n[1],c=function(){return h()().format("YYYY.MM.DD HH:mm:ss")};return(0,s.useEffect)(function(){o(c());var e,n=setInterval(function(){o(c())},1e3);return(e=(0,i.Z)(a().mark(function e(){return a().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getMachineList();case 2:t.getProcessedQuantity();case 3:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})(),function(){var e,i;clearInterval(n),(null===(e=t.socket)||void 0===e?void 0:null===(i=e.socket)||void 0===i?void 0:i.readyState)===WebSocket.OPEN&&t.socket.disconnect()}},[]),(0,p.jsxs)(C.Z,{children:[(0,p.jsx)(F.Time,{children:r}),(0,p.jsxs)(F.RowFlex,{children:[(0,p.jsxs)(L.Z,{style:{width:" 690px",height:"410px",alignItems:"center",justifyContent:"space-between",padding:" 24px"},children:[(0,p.jsx)(Y,{children:"기계별 가공 수량"}),t.processChart?(0,p.jsx)(l.$Q,{options:t.processChart.options,data:t.processChart.data}):(0,p.jsx)("div",{children:(0,p.jsx)(Y,{children:"가공 기계가 없습니다."})})]}),(0,p.jsxs)(L.Z,{style:{minWidth:"382px",gap:"32px",alignItems:"center",justifyContent:"center",padding:"24px"},children:[(0,p.jsx)(Y,{children:"공정 임박 기계"}),(0,p.jsx)(A,{list:t.machines})]})]}),(0,p.jsxs)(L.Z,{style:{margin:"0 auto",width:"1152px",alignItems:"center",gap:"32px",padding:"24px"},children:[(0,p.jsx)(Y,{children:"전체 공정 현황"}),(0,p.jsx)(G,{children:t.machines.map(function(e,t){return(0,p.jsx)(g,{data:e},"real_time_machine_".concat(t))})})]})]})})),F={RowFlex:d.ZP.div.withConfig({displayName:"pages__RowFlex",componentId:"sc-u1kke2-0"})(["margin:0 auto;display:flex;gap:32px;& canvas{max-width:690px !important;max-height:428px !important;margin:-12px 0 0 -12px;}"]),Time:d.ZP.p.withConfig({displayName:"pages__Time",componentId:"sc-u1kke2-1"})(["width:100%;height:24px;text-align:center;font-size:20px;font-weight:600;margin-bottom:-16px;"])},Y=d.ZP.p.withConfig({displayName:"pages__SectionTitle",componentId:"sc-u1kke2-2"})(["width:100%;font-weight:600;text-align:center;"]),G=d.ZP.div.withConfig({displayName:"pages__MachineWrap",componentId:"sc-u1kke2-3"})(["display:grid;grid-template-rows:repeat(2,1fr);grid-template-columns:repeat(4,1fr);gap:24px;"])},6409:function(e,t,n){"use strict";var i=n(2777),r=n(2262),a=n(5981),o=new(function(){function e(){(0,i.Z)(this,e)}return(0,r.Z)(e,[{key:"ToStringStatus",value:function(e,t,n,i,r){if(!e)return"전원꺼짐";if("AUTOMATIC"!==t)return"수정 중";if(r)return"알람발생";switch(n){case a.Z9.ACTIVE:return"가공중";case a.Z9.READY:return"READY";case a.Z9.TRIGGERED:return"비상정지";case a.Z9.STOPPED||a.Z9.INTERRUPTED:if(i)return"가공완료";return"대기 중"}}},{key:"ToColorStatus",value:function(e){switch(e){case a.Z9.ACTIVE:return"#6ebd33";case a.Z9.OFF:return"#d5d7da";case a.Z9.TRIGGERED:return"#e8661c";case a.Z9.STOPPED:case a.Z9.READY:case a.Z9.INTERRUPTED:return"#f5b117";default:return"#d5d7da"}}},{key:"ToClassStatus",value:function(e,t,n,i,r){if(!e)return a.V6.OFF;if("AUTOMATIC"!==t)return a.V6.MODIFY;if(r)return a.V6.ALARM;switch(n){case a.Z9.ACTIVE:return a.V6.RUNNING;case a.Z9.READY:return a.V6.READY;case a.Z9.TRIGGERED:return a.V6.EMERGENCY_STOP;case a.Z9.STOPPED||a.Z9.INTERRUPTED:if(i)return a.V6.SUCCESS;return a.V6.WAIT}}}]),e}());t.Z=o},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(6536)}])},7743:function(){}},function(e){e.O(0,[196,662,853,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);